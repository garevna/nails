{"version":3,"sources":["webpack:///./src/views/PersonalOfflineData.vue?3d4b","webpack:///src/views/PersonalOfflineData.vue","webpack:///./src/views/PersonalOfflineData.vue?b394","webpack:///./src/views/PersonalOfflineData.vue?29da","webpack:///./src/views/PersonalOfflineData.vue?6bc5","webpack:///./src/helpers/datesToString.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","_l","item","key","id","_v","_s","date","availableSpots","class","buttons","attrs","on","$event","schema","loading","sendData","staticRenderFns","name","components","PaymentForm","data","computed","accessDays","dateOfCourses","map","methods","formatedDate","dates","JSON","parse","Array","isArray","created","getCourse","$route","params","courseid","component","VBtn","parseStr","str","split","day","pop","month","join","res","days","parseStrArray","array","parseObjArray","reduce","accum","length","push","arrayToString","toString","datesToString","sort"],"mappings":"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","file":"js/personal-offline-data.91cd409d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"d-flex justify-center my-8\"},[_c('table',[_vm._m(0),_vm._l((_vm.dateOfCourses),function(item){return _c('tr',{key:item.id},[_c('td',[_vm._v(_vm._s(item.date))]),_c('td',{staticClass:\"text-right\"},[_vm._v(_vm._s(item.availableSpots))]),_c('td',[_c('v-btn',{class:{ buttons: _vm.id === item.id },attrs:{\"text\":\"\",\"disabled\":!item.availableSpots},on:{\"click\":function($event){_vm.id = item.id}}},[_vm._v(\"Select date\")])],1)])})],2)]),_c('PaymentForm',{attrs:{\"schema\":_vm.schema,\"loading\":_vm.loading},on:{\"submit\":_vm.sendData}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',[_c('th',[_vm._v(\"Date of course\")]),_c('th',[_vm._v(\"Available spots\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"d-flex justify-center my-8\">\n      <table>\n        <tr>\n          <th>Date of course</th>\n          <th>Available spots</th>\n        </tr>\n        <tr v-for=\"item in dateOfCourses\" :key=\"item.id\">\n          <td>{{ item.date }}</td>\n          <td class=\"text-right\">{{ item.availableSpots }}</td>\n          <td>\n            <v-btn text :disabled=\"!item.availableSpots\" :class=\"{ buttons: id === item.id }\" @click=\"id = item.id\"\n              >Select date</v-btn\n            >\n          </td>\n        </tr>\n      </table>\n    </div>\n    <PaymentForm @submit=\"sendData\" :schema=\"schema\" :loading=\"loading\" />\n  </div>\n</template>\n<style scoped>\ntd {\n  padding: 10px;\n}\n</style>\n<script>\nimport { mapState, mapActions, mapMutations } from 'vuex';\n\nimport PaymentForm from '@/components/forms/PaymentForm.vue';\nimport { datesToString } from '@/helpers/datesToString';\nconst schema = require('@/config/paymentSchema').default;\nexport default {\n  name: 'PersonalOfflineData',\n  components: {\n    PaymentForm,\n  },\n  data() {\n    return {\n      schema,\n      id: null,\n    };\n  },\n  computed: {\n    ...mapState(['error']),\n    ...mapState('offlineCourses', ['offlineCourse', 'loading']),\n    accessDays() {\n      return this.offlineCourse?.dateOfCourses ?? [];\n    },\n    dateOfCourses() {\n      return this.accessDays.map(item => ({\n        date: this.formatedDate(item.date),\n        availableSpots: item.availableSpots,\n        id: item._id,\n      }));\n    },\n  },\n  methods: {\n    ...mapActions('offlineCourses', {\n      getCourse: 'GET_COURSE',\n      buyCourse: 'BUY_COURSE',\n    }),\n    ...mapMutations({\n      message: 'MESSAGE',\n    }),\n    async sendData(data) {\n      if (!this.id) {\n        this.message({\n          message: true,\n          messageType: 'Buy offline course',\n          messageText: 'Please, select date !!!',\n        });\n        return;\n      }\n      const res = Object.assign({}, data, {\n        productId: this.$route.params.courseid,\n        dateOfCourse: this.id,\n      });\n      delete res.message;\n      await this.buyCourse(res);\n      if (!this.error) this.$router.back();\n    },\n    formatedDate(date) {\n      let dates = [];\n      try {\n        dates = JSON.parse(date);\n      } catch (e) {\n        // console.error(e.message);\n      }\n      if (!Array.isArray(dates)) dates = [];\n      return datesToString(dates);\n    },\n  },\n  created() {\n    this.getCourse(this.$route.params.courseid);\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonalOfflineData.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonalOfflineData.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PersonalOfflineData.vue?vue&type=template&id=e28622ce&scoped=true&\"\nimport script from \"./PersonalOfflineData.vue?vue&type=script&lang=js&\"\nexport * from \"./PersonalOfflineData.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PersonalOfflineData.vue?vue&type=style&index=0&id=e28622ce&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e28622ce\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\ninstallComponents(component, {VBtn})\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonalOfflineData.vue?vue&type=style&index=0&id=e28622ce&scoped=true&lang=css&\"","const parseStr = str => {\n  const split = str.split('-');\n  const day = split.pop();\n  const month = split.join('-');\n  const res = { month, days: [day] };\n  return res;\n};\n\nconst parseStrArray = array => array.map(item => parseStr(item));\n\nconst parseObjArray = array => {\n  return array.reduce((accum, item) => {\n    if (!accum.length || item.month !== accum[accum.length - 1].month) {\n      accum.push(item);\n      return accum;\n    }\n    accum[accum.length - 1].days.push(item.days[0]);\n    return accum;\n  }, []);\n};\n\nfunction arrayToString(array) {\n  if (array.length === 1) return '-' + array[0];\n  return '(' + array.join(', ') + ')';\n}\n\nfunction toString(array) {\n  return array.map(item => item.month + arrayToString(item.days)).join(', \\n');\n}\n\nexport function datesToString(dates) {\n  return toString(parseObjArray(parseStrArray(dates.sort())));\n}"],"sourceRoot":""}